<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
		<title>M3 Example 1</title>
	    <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAzr2EBOXUKnm_jVnk0OJI7xSosDVG8KKPE1-m51RBrvYughuyMxQ-i1QfUnH94QxWIa6N4U6MouMmBA" type="text/javascript"></script>
		<script src="../lib/prototype.js" type="text/javascript" charset="utf-8"></script>
		<script src="../js/sm3.js" type="text/javascript" charset="utf-8"></script>
	</head>
	
	<body>
		<div id="map_canvas" style="width: 500px; height: 400px"></div>
		<div onclick="m3.focusOn(markers)">All</div>
		
	    <script type="text/javascript" charset="utf-8">
			var m3;
			var markers;
			
	        function runTest() {
				markers = [];
				for (var i = 0; i < 30; i++) {
					markers.push({ geocode: new GLatLng(-33 + Math.random() * 2, 150 + Math.random() * 3), category: "Category " + parseInt(i / 6) });
				}
				
				for (var i = 30; i < 60; i++) {
					markers.push({ geocode: new GLatLng(-33 + Math.random() / 2, 150 + Math.random() / 2), category: "Category " + parseInt(i / 6) });
				}				

				for (var i = 0; i < 10; i++) {
					var element = new Element("div");
					
					element.innerHTML = "Category " + i;
					element.style.cursor = "pointer";
					
					element.onclick = function() {
						m3.focusOn(m3.findMarkers([{ category: this.innerHTML }]));
					}.bind(element);
					
					document.body.appendChild(element);	
				}
		
	            m3 = new SM3('map_canvas', markers);
	        }
        
	        Event.observe(window, "load", runTest);
	    </script>
	</body>
</html>